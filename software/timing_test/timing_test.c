// Copyright GMicro UFSM 2020.
// This source describes Open Hardware and is licensed under the CERN-OHLS v2
// You may redistribute and modify this documentation and make products
// using it under the terms of the CERN-OHL-S v2 (https:/cern.ch/cern-ohl).
// This documentation is distributed WITHOUT ANY EXPRESS OR IMPLIED
// WARRANTY, INCLUDING OF MERCHANTABILITY, SATISFACTORY QUALITY
// AND FITNESS FOR A PARTICULAR PURPOSE. Please see the CERN-OHL-S v2
// for applicable conditions.
// Source location: https://github.com/vctrop/shapelet_distance_hardware_accelerator
// As per CERN-OHL-S v2 section 4, should You produce hardware based on
// these sources, You must maintain the Source Location visible on any
// product you make using this documentation.

#include <stdio.h>
#include "shapelet_transform.h"

#define SIZE 512
//DEFINE CONSTANT LENGTH AT COMPILER BY USING -DLENGTH=[value]

int main(){
    // time series from bird chicken data set (the two first ones)
    float ts1[SIZE] = {1.7613808,1.7294248,1.6788066,1.6146098,1.5291964,1.4652777,1.4097854,1.3462449,1.2914795,1.2581905,1.1952949,1.1417349,1.0793132,1.0266191,0.9647147,0.9137752,0.85316049,0.78158085,0.7306459,0.69081944,0.64199681,0.61489667,0.60998615,0.61455715,0.61980035,0.64720355,0.65388915,0.65429475,0.66258225,0.671526,0.67515135,0.680112,0.69155545,0.67649348,0.68493593,0.67226429,0.66076615,0.64727191,0.63854236,0.63101593,0.6019926,0.57412456,0.57019387,0.54549088,0.52083347,0.52020456,0.47491386,0.47639955,0.45639973,0.43621761,0.41663934,0.39768086,0.35667861,0.33901441,0.3250257,0.28645022,0.27112621,0.25648353,0.22017759,0.18471249,0.14506147,0.13314407,0.099893821,0.061603172,0.051779857,-0.0074699328,-0.015873641,-0.073911182,-0.10981379,-0.14528801,-0.17231751,-0.2066205,-0.26152716,-0.29473639,-0.32742609,-0.34997345,-0.41171382,-0.43231749,-0.49305525,-0.52253203,-0.57117692,-0.6187235,-0.67715069,-0.72274218,-0.74819256,-0.80456896,-0.84688145,-0.90160809,-0.95558505,-0.99419244,-1.0139895,-1.0817318,-1.1313543,-1.1798784,-1.210531,-1.2562136,-1.3149826,-1.3573224,-1.416513,-1.4559475,-1.4935477,-1.5487962,-1.5827574,-1.61449,-1.6645933,-1.6918256,-1.737809,-1.7599052,-1.8010464,-1.8173571,-1.8528905,-1.8628005,-1.89019,-1.8949775,-1.8943782,-1.8674899,-1.8401756,-1.7695325,-1.7017081,-1.6338381,-1.5931025,-1.5249819,-1.4584882,-1.3902696,-1.3232906,-1.2787177,-1.2110551,-1.1654932,-1.097523,-1.0292861,-0.98359438,-0.91523905,-0.84655104,-0.77766706,-0.73137375,-0.68489814,-0.63825392,-0.56870457,-0.52175501,-0.45194134,-0.40472516,-0.37564943,-0.36764676,-0.38053716,-0.36920993,-0.35628079,-0.28472395,-0.21776544,-0.18117923,-0.1654519,-0.14826851,-0.1077949,-0.072913128,-0.015873641,0.034455184,0.09965684,0.1584076,0.2304293,0.26550247,0.33084769,0.36164837,0.34341907,0.32103804,0.30571631,0.31852696,0.30133672,0.2899548,0.35404675,0.42167063,0.49263274,0.56024978,0.55090271,0.52013392,0.51320907,0.53025574,0.52586248,0.50086327,0.4757638,0.45212951,0.45191532,0.43020422,0.40980335,0.38935919,0.36952343,0.3522899,0.33401275,0.31911713,0.30245099,0.2899548,0.27494525,0.28727054,0.27860934,0.27142472,0.26009521,0.27741304,0.26775151,0.26550247,0.22891171,0.16390146,0.1065065,0.064551761,0.045613795,0.005944555,-0.060211861,-0.098304267,-0.15791636,-0.19517022,-0.2320162,-0.26126056,-0.31847322,-0.35362843,-0.38829828,-0.41395375,-0.44730654,-0.48011016,-0.50278058,-0.53412131,-0.56484908,-0.58427468,-0.63328188,-0.66151906,-0.68904075,-0.70359229,-0.72926599,-0.74108997,-0.76480629,-0.78767951,-0.79545886,-0.81622204,-0.82103229,-0.83959428,-0.84135797,-0.85763673,-0.87290833,-0.87022635,-0.89787336,-0.90932364,-0.919687,-0.91057235,-0.91843146,-0.92517174,-0.97421996,-1.0092316,-1.0714323,-1.1223125,-1.1843947,-1.2352932,-1.2972432,-1.3388994,-1.3800794,-1.4207535,-1.4815278,-1.530437,-1.5268504,-1.492479,-1.4357494,-1.4064641,-1.3692353,-1.3370811,-1.3203785,-1.2810237,-1.2187957,-1.1823302,-1.1410682,-1.0993801,-1.0600868,-1.0173254,-0.95152903,-0.90807266,-0.86576244,-0.8214698,-0.7769151,-0.70933225,-0.66428992,-0.61912682,-0.55076694,-0.50509798,-0.43645782,-0.39042656,-0.32145371,-0.25312801,-0.20679368,-0.1375474,-0.068175788,-0.021433578,0.046816929,0.095161038,0.16498382,0.23315686,0.30133672,0.37120052,0.43936216,0.50753064,0.57742862,0.64558114,0.71553381,0.78367039,0.8518138,0.92179381,0.98992127,1.0599491,1.1280606,1.1981318,1.2662296,1.3343366,1.404426,1.472517,1.5426451,1.5901461,1.6581984,1.7284222,1.7557206,1.8060266,1.8340382,1.8460035,1.8560387,1.8669763,1.8034814,1.7626386,1.6995948,1.6324472,1.5429732,1.4759099,1.408883,1.3195777,1.2526465,1.1634756,1.0966516,1.007631,0.96821017,0.87944031,0.84044099,0.85720056,0.92910376,0.97898597,1.0450923,1.1169955,1.1668708,1.2387877,1.3048872,1.3767904,1.4266726,1.4985917,1.5485058,1.5984404,1.6544523,1.6732102,1.6995948,1.6916833,1.626689,1.5401773,1.5043408,1.418237,1.3537873,1.2680343,1.2038626,1.1398185,1.0546353,0.99091477,0.92734235,0.85540497,0.77092355,0.72011393,0.65692433,0.57295333,0.51019668,0.42683636,0.36456734,0.31364606,0.23096022,0.16923125,0.09776555,0.036385211,-0.045006345,-0.10569169,-0.16605119,-0.21497408,-0.27439249,-0.35298813,-0.41143355,-0.45715264,-0.51438125,-0.57107894,-0.64578262,-0.7010926,-0.74183053,-0.79545886,-0.86576244,-0.91751771,-0.93618452,-0.97024597,-0.98653385,-1.0339688,-1.0632519,-1.1079501,-1.1334939,-1.1432193,-1.1648552,-1.2032165,-1.2205047,-1.2240594,-1.2571524,-1.2679054,-1.296833,-1.3025889,-1.2977901,-1.3205175,-1.3473145,-1.3370811,-1.3573224,-1.3433816,-1.3568986,-1.3393187,-1.3447852,-1.3481576,-1.3477361,-1.3220419,-1.3166414,-1.3087755,-1.2760106,-1.263462,-1.2264337,-1.2094851,-1.1834923,-1.1615306,-1.1244431,-1.0905981,-1.0630081,-1.0234186,-1.02258,-0.97808229,-0.94286328,-0.92517174,-0.88670791,-0.84688145,-0.82376897,-0.81316863,-0.7867088,-0.7415138,-0.71184105,-0.69651477,-0.66387976,-0.6463933,-0.62801589,-0.59144791,-0.53900676,-0.47161075,-0.425183,-0.37859802,-0.31946672,-0.30622085,-0.25993437,-0.196902,-0.14869462,-0.083244584,-0.034469808,0.032525156,0.081637175,0.1308016,0.19713575,0.24646425,0.31312653,0.36259629,0.42683636,0.47632891,0.52586248,0.58746613,0.63447722,0.69876513,0.74589699,0.80826627,0.85566246,0.90314523,0.96502688,1.0121382,1.0758474,1.1242758,1.1732374,1.2071075,1.2572563,1.292694,1.3118052,1.3487605,1.3515018,1.3897218,1.39674,1.4185742,1.4271215,1.41818,1.4415932,1.4205999,1.4322872,1.4258295,1.3884207,1.3396641,1.3665546,1.3314108,1.316816,1.3033285,1.3325,1.3620565,1.3816166,1.4426574,1.4634388,1.5250721,1.5772671,1.6092094,1.6414753,1.6949783,1.7279482,1.7314824,1.7567164};
    float ts2[SIZE] = {0.39157309,0.36945283,0.35483571,0.33370604,0.32089616,0.30079246,0.25289618,0.20559839,0.18685085,0.17833059,0.12287221,0.077915272,0.061081114,0.017409591,0.013264437,-0.028620483,-0.043022385,-0.0044482816,0.035134103,0.087871306,0.12804628,0.20812498,0.27401701,0.32761213,0.36667858,0.41831906,0.45760663,0.41748767,0.4178444,0.40544727,0.36764559,0.35628622,0.27958614,0.20344916,0.15302628,0.11859733,0.085123594,0.036062782,-0.012664884,-0.04397465,-0.11546528,-0.16263631,-0.1497881,-0.13559257,-0.13924243,-0.14233213,-0.16674019,-0.23159445,-0.27327299,-0.33331581,-0.37252672,-0.43004294,-0.47156818,-0.53183506,-0.59611147,-0.63761313,-0.70183058,-0.74684058,-0.81323379,-0.81502924,-0.83722026,-0.81610533,-0.85669599,-0.83287463,-0.82998245,-0.80356079,-0.79891739,-0.77000745,-0.73968827,-0.73238266,-0.74055799,-0.73151589,-0.73690223,-0.7261384,-0.7287387,-0.69001719,-0.67673265,-0.70200157,-0.69908581,-0.69446305,-0.67774977,-0.670453,-0.66148461,-0.67911183,-0.66706553,-0.68200401,-0.70200157,-0.68472813,-0.66098047,-0.670453,-0.64935576,-0.65895507,-0.63209707,-0.57543877,-0.57871126,-0.58116415,-0.55168521,-0.55039096,-0.51836183,-0.51452624,-0.4800737,-0.47377048,-0.43702425,-0.42354218,-0.38942869,-0.34953969,-0.33751403,-0.29566449,-0.25294523,-0.21701565,-0.17312301,-0.15669865,-0.091729415,-0.074081556,-0.027535549,0.0099152949,0.057387033,0.10548379,0.12675202,0.14891651,0.19902393,0.24965612,0.27401701,0.32578131,0.35156322,0.41748767,0.47029563,0.50996351,0.54967857,0.60315871,0.65702213,0.72290825,0.76289749,0.81721197,0.85733977,0.92318757,0.97791185,1.0181576,1.047893,1.0936194,1.1341953,1.1406548,1.1889609,1.2298375,1.2794968,1.3303325,1.3236637,1.3762711,1.3706136,1.3835237,1.420267,1.4347131,1.4309895,1.4468921,1.4636643,1.4614414,1.4796376,1.5200278,1.5396362,1.5183797,1.5602558,1.5403644,1.5414582,1.5429146,1.5249601,1.5078547,1.5331708,1.4951008,1.5217643,1.5261453,1.5308919,1.5180142,1.5472779,1.5360866,1.5428232,1.5330794,1.4997826,1.5324397,1.5410041,1.5341732,1.5030875,1.4978545,1.4935383,1.4644043,1.4617214,1.4338758,1.3932055,1.3668369,1.3145007,1.2767992,1.2377151,1.1986752,1.147701,1.0818562,1.0279574,0.96209777,0.88148249,0.82792274,0.74786762,0.69469703,0.61525513,0.57577004,0.49659348,0.44404496,0.44534511,0.36764559,0.31612599,0.27958614,0.22876526,0.19357567,0.15930592,0.1097734,0.076998386,0.028347372,-0.04397465,-0.091729415,-0.12132334,-0.19120426,-0.23724612,-0.29714448,-0.34306842,-0.40735662,-0.44885533,-0.51308752,-0.55460392,-0.6187742,-0.68285603,-0.7206017,-0.78060913,-0.84030406,-0.8816819,-0.94097882,-0.97610944,-1.0172779,-1.0754664,-1.1331978,-1.1657104,-1.2221417,-1.2779804,-1.3183765,-1.3617296,-1.4151626,-1.4547656,-1.4803411,-1.5313713,-1.5813461,-1.6025111,-1.6217952,-1.6674391,-1.6900635,-1.7024931,-1.7170247,-1.7500297,-1.7852812,-1.8168061,-1.848738,-1.8477975,-1.8440415,-1.8337671,-1.8581751,-1.875652,-1.8537617,-1.8362495,-1.8440415,-1.8217208,-1.8238759,-1.8368715,-1.8340766,-1.828195,-1.7952107,-1.7840813,-1.7473969,-1.7314119,-1.712738,-1.6710477,-1.6481462,-1.6038408,-1.618564,-1.5719089,-1.5416075,-1.5093159,-1.5002709,-1.4648042,-1.413491,-1.3754682,-1.3229167,-1.2826503,-1.2680126,-1.1868224,-1.1433543,-1.1263845,-1.0710411,-1.0251319,-0.97822624,-0.92192173,-0.87375422,-0.82474647,-0.80356079,-0.7176653,-0.69566002,-0.64431731,-0.592326,-0.56874638,-0.5156436,-0.4574493,-0.40367139,-0.34532378,-0.25775962,-0.19935305,-0.13685439,-0.074220121,-0.015901996,0.071612044,0.10509168,0.16787336,0.20168024,0.26471547,0.30410917,0.3385735,0.37908751,0.41403534,0.47791375,0.51309744,0.577138,0.64124342,0.67673667,0.7627884,0.79829049,0.88433339,0.94175232,1.0279574,1.0854795,1.1494876,1.2006357,1.2582669,1.3099133,1.367686,1.4313639,1.4891249,1.5528175,1.6047322,1.6625786,1.7493969,1.7728851,1.8256341,1.8447502,1.8354987,1.8228834,1.8153154,1.8377276,1.831557,1.7966947,1.7918537,1.7858866,1.7814702,1.7508798,1.7485242,1.7478284,1.7183466,1.6895693,1.6909815,1.6636429,1.635526,1.6406117,1.615496,1.6205109,1.6293643,1.6033849,1.5813265,1.589263,1.5687672,1.510511,1.4909645,1.4379708,1.3799475,1.3406953,1.3067558,1.2684116,1.259912,1.1974989,1.1607733,1.1022458,1.0694561,1.0075176,0.94570289,0.8870752,0.79915137,0.77321025,0.71829434,0.69701726,0.67217877,0.65244064,0.62843943,0.57577004,0.55243218,0.5005529,0.48434375,0.46231194,0.41200994,0.36221208,0.34137133,0.28453025,0.27253112,0.22474687,0.20559839,0.15891971,0.14068811,0.095188711,0.077915272,0.072007102,0.028748326,0.013264437,0.010451865,-0.0037760945,-0.0044482816,-0.017387883,-0.055847007,-0.067625022,-0.10447738,-0.14036569,-0.15021264,-0.18435561,-0.21744609,-0.2252352,-0.27356781,-0.30410515,-0.33346617,-0.37997679,-0.40735662,-0.43345399,-0.43624888,-0.4800737,-0.50304599,-0.52460905,-0.56597803,-0.62676084,-0.66638745,-0.72440781,-0.73916644,-0.73429309,-0.78752559,-0.82186314,-0.83070476,-0.83776567,-0.86842094,-0.9123578,-0.94022114,-0.97976814,-0.97764839,-0.96229717,-0.98459138,-0.97784297,-1.0063284,-1.0235576,-1.0466743,-1.0602213,-1.0776804,-1.0873741,-1.0662267,-1.1019942,-1.1068911,-1.1111837,-1.1120033,-1.1101606,-1.1068911,-1.0726508,-1.0954846,-1.0873741,-1.0722469,-1.0602213,-1.0393363,-1.0600237,-1.071445,-1.0433016,-1.0227704,-1.0008742,-1.0045742,-0.9668934,-0.90096895,-0.87430553,-0.82060132,-0.76859527,-0.7026885,-0.65036404,-0.58444254,-0.53183506,-0.49177507,-0.48971428,-0.47455764,-0.50830261,-0.49145666,-0.52156357,-0.50304599,-0.45588381,-0.44449201,-0.38775117,-0.33856358,-0.28150139,-0.23782397,-0.22162662,-0.13671583,-0.05161046,-0.030925966,-0.0098346227,0.040314071,0.055800907,0.10730282,0.1303724,0.18824829,0.25177587,0.31538894,0.35023064};
    
    //normalize the first ts
    zscore_normalization(ts1, LENGTH);

    zscore_normalization(ts2, LENGTH);

    float dist = euclidean_distance(ts1, ts2, LENGTH, INFINITY);
    printf("Dist=%g", dist);
}